!function(a){a.fn.scrollHighlight=function(b){return this.each(function(){function w(){function l(a){c[a]<=j&&m.removeClass(i).eq(q[a]).addClass(i)}for(var c=[],e={top:f.scrollTop(),left:f.scrollLeft()},j="vertical"==g?e.top+h:e.left+h,k=0;v>k;k++)"vertical"==g?(c.push(a(p[k]).offset().top),l(k),d.cancelFlag&&c[k]<j-a(p[k]).outerHeight()&&m.eq(q[k]).removeClass(i)):(c.push(a(p[k]).offset().left),l(k),d.cancelFlag&&c[k]<j-a(p[k]).outerWidth()&&m.eq(q[k]).removeClass(i))}var c={childItem:"a",attribute:"href",highlight:"highlight",buffer:0,container:window,cancelFlag:!0,mode:"vertical"},d=a.extend({},c,b),e=a(this),f=a(d.container),g=d.mode,h=d.buffer,i=d.highlight,j=d.childItem,k=d.attribute;if(!(e.lenth<=0)){for(var l,m=e.find(j),n=0,o=m.length,p=[],q=[],r=[];o>n;n++)r.push(m.eq(n).attr(k));for(var s=r.length,t=0;s>t;t++){var u=d.container==window?a(document).find(r[t]):f.find(r[t]);u.length&&u.is(":visible")&&(p.push(r[t]),q.push(t))}var v=p.length;m.each(function(b){a(this).click(function(){var c=d.container==window?a(document).find(r[b]):f.find(r[b]);c.length&&c.is(":visible")&&("vertical"==g?a("html,body").animate({scrollTop:a(r[b]).offset().top-h},300):a("html,body").animate({scrollTop:a(r[b]).offset().left-h},300))})}),f.on("scroll",function(){clearTimeout(l),l=setTimeout(w,100)}),a(window).on("resize",function(){clearTimeout(l),l=setTimeout(w,100)})}})}}(jQuery);